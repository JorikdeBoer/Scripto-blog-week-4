<!DOCTYPE html>

<html>
    <head>
        <!-- The comment page of the Scripto blog application -->
        <title>	Scripto Blog application </title>
        
        <!-- Link to css style file -->
        <link type="text/css" rel="stylesheet" href="Comment4.css" />
	    <meta charset="utf-8">
          
        <script>                   
        </script>     
     </head>
        
 
    <script>
    
    // Send written comment message to database 
    function submitcomment() {
        var author = document.bloginput.author.value; 
        var title = document.bloginput.title.value;  
        var blog = document.bloginput.text.value;  
        var category = document.bloginput.category.value; 
        var xhr = new XMLHttpRequest();  
        var value = "myblog=" + blog + "&author=" + author + "&title=" + title + "&category=" + category;
        xhr.open('POST', "http://localhost/Scripto4/Scripto4.php", true); 
        xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');  
        console.log(value);
        xhr.send(value);       
    }
        
    // Make autocomplete text epander possible
    // self defined shortcuts list    
    shortcuts = {
        "ivm" : "in verband met",
        "tov" : "ten opzichte van",
        "muv" : "met uitzondering van", 
        "cg"  : "CodeGorilla",
        "gn"  : "Groningen",
        "ioc" : "Internationaal Olympisch Comité",
        "jan" : "januari",
        "feb" : "februari",
        "mrt" : "maart",
        "apr" : "april",
        "jun" : "juni",
        "jul" : "juli",
        "aug" : "augustus",
        "sep" : "september",
        "okt" : "oktober",
        "nov" : "november",
        "dec" : "december"   
    }
        
    // couple text area with shortcuts
    window.onload = function() {
        var ta = document.getElementById("submit");
        var timer = 0;
        var re = new RegExp("\\b(" + Object.keys(shortcuts).join("|") + ")\\b", "g");

        update = function() {
            ta.value = ta.value.replace(re, function($0, $1) {
            return shortcuts[$1.toLowerCase()];
            });
        }
        // constant update
        ta.onkeydown = function() {
        clearTimeout(timer);
        timer = setTimeout(update, 200);
        }
    }           
    </script>  
    
    <!-- Insert background with clouds -->
    <body background="achtergrond.jpg"> 
      <!--Build-up of comment page -->
      <div id="Total">
        <div id="Menu">
            <div id="Welcome">
                <!-- Name and slogan of the blog app -->
                <p class="welcome"> <b> Scripto: jouw blog applicatie, jouw geschriften! </b></p>
                <div style="clear:both"></div>
            </div>     

            <!-- Navigation bar links -->
            <div class="topnav">
                <a href="Index4.html">Menu</a>
                <a href="Category4.html">Categorieën</a>
                <a href="Scripto4.html">Schrijf zelf!</a>
                <a href="Comment4.html">Commentaar</a>
                <div style="clear:both"></div>  
            </div>    
            
            <!-- Inputbox: Your written comment with title of the blog the comment is directed to & your comment itself-->
            <div id="Inputbox"> 
             <h1>Schrijf hier je commentaar!</h1>
              <form name="bloginput" action="" method="post">  
                Titel van bijbehorende blog: <input type="text" name="title"><br><br>
                Jouw commentaar: <textarea id="submit" name="text" rows="5" cols="90"></textarea>
                <!-- Button to submit the new written blog to the database -->
                <input type="button" name="publiceer" onClick="submitcomment();" value="Publiceer commentaar" />
              </form>
                
            <!-- Outputbox: All the blogs with author, title & text ordered by descending ID numbers -->
            <form name="output" action="">  
              <div id="Outputbox">    
                <div class="column">
                  <h1>Lees hier het laatste commentaar, wellicht van uw hand!</h1>
                  <textarea name="outputtext" cols="90" rows="12">
                  </textarea>
                <!-- Button to refresh the outputbox to include new posted blogs since page was loaded -->  
                <input type="button" name="ververs" onClick="getcomments();" value="Ververs comments" />    
                </div>
              </div> 
            </form>    
            </div> 
        </div>
      </div>       
    </body>
</html>